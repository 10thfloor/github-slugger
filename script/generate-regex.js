const fs = require('fs')
const path = require('path')

const regenerate = require('regenerate')

const set = regenerate()
  .add(require('unicode-12.1.0/Sequence_Property/Basic_Emoji/index.js'))
  .add(require('unicode-12.1.0/Sequence_Property/Emoji_Flag_Sequence/index.js'))
  .add(require('unicode-12.1.0/Sequence_Property/Emoji_Modifier_Sequence/index.js'))
  .add(require('unicode-12.1.0/Sequence_Property/Emoji_Tag_Sequence/index.js'))
  .add(require('unicode-12.1.0/Sequence_Property/Emoji_ZWJ_Sequence/index.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Mathematical_Symbols_A/code-points.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Mathematical_Symbols_B/code-points.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Symbols/code-points.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Symbols_And_Arrows/code-points.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Symbols_And_Pictographs/code-points.js'))
  .add(require('unicode-12.1.0/Block/Miscellaneous_Technical/code-points.js'))

console.log(`/${set.toString()}/g`)
// Then you might want to use a template like this to write the result to a file, along with any regex flags you might need:
// const regex = /<%= set.toString() %>/gim;

fs.writeFileSync(path.resolve('..', '_generated_unicode_regex.js'), `
/* *********************** *\\
 * DO NOT EDIT THIS FILE!
 * It was generated by script/generate-regex.js! Edit the script and run it again instead!
\\* *********************** */

module.exports = function () {
  return /${set.toString()}/g
}
`)
